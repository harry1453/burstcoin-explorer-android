<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<meta name="robots" content="noindex, nofollow">
		<meta name="googlebot" content="noindex, nofollow">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Dynamic GeoChart</title>
	</head>
	<body>
		<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
		<div id="geochart" style="width: 100%; height: 100%;"></div>
		<script type="text/javascript">
			google.charts.load('current', {
				'packages': ['geochart'],
				'mapsApiKey': 'AIzaSyDSUCLtUmdc8UhrvXFD_jVR9ChsqLW3jcQ'
			});
			function drawRegionsMap() {
				let params = new URLSearchParams(location.search.slice(1));
				var array = [['Country', 'Peers']];
				for (let p of params) {
					p[1] = parseInt(p[1]);
					array.push(p);
				}
				var data = google.visualization.arrayToDataTable(array);
				var options = {
					colorAxis: {colors: ['#C4DFE9', '#0099cc']},
					backgroundColor: '#FAFAFA',
					datalessRegionColor: '#fcfcfc',
					defaultColor: '#f5f5f5'
				};
				var chart = new google.visualization.GeoChart(document.getElementById('geochart'));
				chart.draw(data, options);
			}
			google.charts.setOnLoadCallback(drawRegionsMap);
		</script>
	</body>
</html>